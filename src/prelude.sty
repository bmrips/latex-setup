% Macros to load packages and classes with senseful handling of options.
\newcommand*{\LoadPackage}[2][]{
    \PassOptionsToPackage{#1}{#2}
    \RequirePackage{#2}
}

\newcommand*{\LoadPackageWithOptions}[2][]{
    \PassOptionsToPackage{#1}{#2}
    \DeclareOption*{
        \PassOptionsToPackage{\CurrentOption}{#2}
    }
    \ProcessOptions*
    \RequirePackage{#2}
}

\let\@LoadClass\LoadClass
\renewcommand*{\LoadClass}[2][]{
    \PassOptionsToClass{#1}{#2}
    \@LoadClass{#2}
}

\let\@LoadClassWithOptions\LoadClassWithOptions
\renewcommand*{\LoadClassWithOptions}[2][]{
    \PassOptionsToClass{#1}{#2}
    \@LoadClassWithOptions{#2}
}

% Load commonly used packages
\LoadPackage{
    etoolbox,
    iflang,
    scrlfile
}

% Create abbreviating macros. `\new\textit{important,definition}` is equivalent to
% `\def\important{\textit{important}}` and `\def\definition{\textit{definition}}`.
\newcommand*{\new}[2]{
    \newcommand*{\@new}[1]{
        \expandafter\newcommand\expandafter{\csname ##1\endcsname}{#1{##1}}
    }
    \forcsvlist{\@new}{#2}
    \undef\@new
}
